{
	"timestamp": "1999-12-30T23:00:00.000Z",
	"inventory": [],
	"location": "dungeon_cell",
	"seconds": 0,
	"steps": 0,
	"hints": 0,
	"points": 0,
	"locations": {
		"dungeon_cell": {
			"name": "A dungeon cell",
			"description": "A dungeon cell.\nIt is moist and dark, but a weak light shines through a small barred window just below the ceiling.\n\nBecause of the light you see the outlines of the few things in your cell. The door in the north seems very massive.\n\nDirty, half rotten straw is lying on the floor.",
			"objects": [
				"straw",
				"bucket",
				"bed",
				"barred_window",
				"cell_door",
				"trap_door"
			],
			"states": {
				"trapdoor_open": {
					"description":"A dungeon cell. It is moist and dark. In the weak light of the small barred window, you see an open trap door in the ground among some other things.",
					"connections": {
						"down":"lower_cell"
					}
				}
			},
			"connections": {}
		},
		"lower_cell": {
			"name": "A deep dungeon cell",
			"description": "A deep dungeon cell.\nIt is moist and dark, but a weak light shines through the small open trap door in the ceiling.\nThe hole in the ceiling is too high for you to climb back.\nThe cell door in the north seems very massive.\n\nThe cell is deserted and has not seen a cell dweller in a while.",
			"objects": [
				"bed",
				"unlocked_cell_door"
			],
			"connections": {
			},
			"states": {
				"celldoor_open": {
					"connections": {
						"north":"corridor"
					}
				}
			}
		},
		
		"corridor": {
			"name": "A narrow corridor",
			"description": "A narrow corridor.\nIt stretches to the east and to the west, slightly curved.\nYou hear a faint noise from the west!",
			"additional_description": "There is a burning torch on a mount on the wall, it flickers and casts creepy shadows.",
			"objects": [
				"torch"
			],
			"connections": {
				"east": "forward_corridor",
				"west": "backward_corridor"
			}
		},
		"forward_corridor": {
			"name": "A narrow, dark corridor",
			"description": "A narrow corridor.\nComming from the west, it stretches further to the east, leading to a staircase.\nThere is some debris on the floor, but it is to dark to see any details.",
			"objects": [],
			"connections": {
				"west": "corridor",
				"east": "staircase"
			}
		},
		"backward_corridor": {
			"name": "A narrow, guarded corridor",
			"description": "A narrow, guarded corridor.\nComming from the east, it stretches further to the west, slightly curved.",
			"objects": ["guard", "barrel"],
			"connections": {
				"east": "corridor",
				"west": "entrance_corridor"
			},
			"states": {
				"hidden": {
					"description":"A narrow corridor.\nIt stretches further to the west. You are hidden behind the barrel."
				}
			}
		},
		"staircase": {
			"name": "A dark staircase",
			"description": "A dark staircase\nThe steps lead up to the north.",
			"objects": [],
			"connections": {
				"west": "forward_corridor",
				"north": "upper_corridor",
				"up": "upper_corridor",
				"east": "latrine"
			},
			"states": {
				"torch": {
					"description": "A staircase\nThe steps lead up to the north.\nIn a dark corner half way up the light of the torch reveals a small passage to the east."
				}
			}


		},

		"latrine": {
			"name": "The latrine.",
			"description": "A small, smelly room, the latrine.\nIn the end of the room is a wooden board with a hole in it.",
			"objects": ["latrine"],
			"connections": {
				"west":"staircase"
			}
		},

		"upper_corridor": {
			"name": "A narrow, upper corridor",
			"description": "A narrow, upper corridor.\nIn the south, it leads down a staircase.\nThe corridor stretches further to the west.",
			"objects": [],
			"connections": {
				"south": "staircase",
				"down": "staircase",
				"west": "guard_room"
			}
		},

		"guard_room": {
			"name": "A guard room",
			"description": "This is the guard room.\nYou manage to hide behind a ledge before anyone could see you.\nYou hear a fire cracking in a fireplace.",
			"objects": ["small_guard","big_guard", "cell_door", "fireplace"],
			"connections": {
				"east": "upper_corridor"
			}
		},

		"entrance_corridor": {
			"name": "Entrance hall",
			"description": "An entrance hall. The corridor from the east ends here. There is a big portal to the south.",
			"objects": ["portal"],
			"color": "white",
			"connections": {
				"east": "backward_corridor"
			}
		},

		"outside": {
			"name": "The outside world",
			"description": "A meadow! Trees! Singing birds! You are back in the outside world.",
			"color": "aquamarine",
			"connections": {
				"north": "entrance_corridor"
			}
		}
	},
	"objects": {
		"straw": {
			"name": "straw",
			"description": "The straw is dirty, rotten and full with vermin. But underneath you see a trap door in the floor!",
			"portable": false,
			"error_portable": "While touching the rotten straw you feel an iron ring which belongs to a hidden trap door!\nBut it makes no sense to fill your pockets with the straw, so you leave it where it is.",
			"hidden": false,
			"definite_article": "the",
			"indefinite_article": "some",
			"state":"rotten",
			"states": {
				"rotten":{
					"name":"half rotten"
				}
			}
		},
		"bucket": {
			"name": "wooden bucket",
			"description": "A wooden bucket.\nIt appears to be used for... well you can imagine. No other facilities here.",
			"portable": false,
			"error_portable": "Trust me, you DON'T want to carry THAT around! It is nearly full with... you know.",
			"hidden": false,
			"definite_article": "the",
			"indefinite_article": "a",
			"state":"full",
			"states": {
				"full":{
					"name":"full"
				},
				"empty": {
					"name":"empty",
					"description":"A wooden bucket.\nIt appears to be used for... well you can imagine. No other facilities here.\nIt is now empty."
				}
			}
		},
		"bed": {
			"name": "bunk bed",
			"description": "Your bunk bed. Comfortable as a wooden board. Maybe due to the fact that it IS a wooden board.\nIt is mounted on the wall.",
			"portable": false,
			"hidden": false,
			"definite_article": "the",
			"indefinite_article": "a"
		},
		"trap_door": {
			"name": "trap door",
			"description": "After removing the straw, you can see a trap door in the floor.",
			"portable": false,
			"hidden": true,
			"definite_article": "the",
			"indefinite_article": "a"
		},
		"cell_door": {
			"name": "cell door",
			"description": "The door is very sturdy. As expected, it is locked.",
			"error_portable": "I can't imagine a reason to carry around a door down here!",
			"portable": false,
			"hidden": false,
			"definite_article": "the",
			"indefinite_article": "a"
		},
		"unlocked_cell_door": {
			"name": "cell door",
			"description": "The door is very sturdy. Surprisingly, it is unlocked.",
			"error_portable": "Come on, why should you carry a cell door?",
			"portable": false,
			"hidden": false,
			"states": {
				"open":{
					"name":"open",
					"description": "The massive cell door is open."
				}
			},
			"definite_article": "the",
			"indefinite_article": "a"
		},
		"barred_window": {
			"name": "barred window",
			"description": "It is to high for you, you can't reach it!",
			"portable": false,
			"definite_article": "the",
			"indefinite_article": "a"
		},
		"torch": {
			"name": "torch",
			"description": "The torch is quite bright!",
			"portable": true,
			"state": "burning",
			"states":  { "burning": {
				"name": "burning"
			}},
			"definite_article": "the",
			"indefinite_article": "a"
		},
		"barrel": {
			"name": "barrel",
			"description": "A large barrel, approx. half your height. It is very heavy, it seems to be filled with water.",
			"portable": false,
			"definite_article": "the",
			"indefinite_article": "a",
			"states": {
				"open": {
					"name": "open",
					"description": "A large barrel, approx. half your height. The lid is open and you see that it is filled with water."
				}
			}
		},


		"guard": {
			"name": "guard",
			"description": "A big, dim looking guard. Looks like he could eat you for breakfast.",
			"error_portable": "He is not your type!",
			"portable": false,
			"states": {
				"unconscious": {
					"name":"unconscious",
					"description":"A big, dim looking guard. But he is harmless now, due to his unconciousness.\nIt might be a good idea to search him."
				}
			},
			"definite_article": "the",
			"indefinite_article": "a",
			"person": "true"
		},

		"small_guard": {
			"name": "small guard",
			"description": "A small, grim looking guard with a ferret face.",
			"error_portable": "He is not your type!",
			"portable": false,
			"definite_article": "the",
			"indefinite_article": "a",
			"person": "true"
		},

		"big_guard": {
			"name": "big guard",
			"description": "A hefty guard with broad shoulders.",
			"error_portable": "He is not your type!",
			"portable": false,
			"definite_article": "the",
			"indefinite_article": "a",
			"person": "true"
		},

		"stone": {
			"name": "stone",
			"description": "A stone the size of a fist.",
			"portable": true,
			"definite_article": "the",
			"indefinite_article": "a",
			"custom_errors": {
				"throw": "Leave it, you throw like a girl. Besides, where do you wanna throw it?"
			}
		},
		"key": {
			"name": "key",
			"description": "A large, slightly rusty key.",
			"portable": true,
			"definite_article": "the",
			"indefinite_article": "a"
		},
		"latrine": {
			"name": "latrine hole",
			"description": "Ugh, the cesspool of the latrine is not very deep but very full.\nMaybe you can find something in there?"
		},

		"fireplace": {
			"name": "fireplace",
			"description": "An open fireplace, the fire is cracking and radiates a cosy warmth."
		},

		"ring": {
			"name": "ring",
			"description": "A golden ring.\nIt looks very valuable!",
			"state":"dirty",
			"definite_article": "the",
			"indefinite_article": "a",
			"states": {
				"dirty": {
					"name":"dirty",
					"description":"A ring.\nIt is very dirty and should be cleaned."
				}
			}
			
		},

		"portal": {
			"name": "portal",
			"description": "A large portal with two door leafs. The left one has a large keyhole. The doors are locked.",
			"portable": true,
			"definite_article": "the",
			"indefinite_article": "a",
			"states": {
				"open": {
					"description": "A large portal with two door leafs. The left leaf is open."
				}
			}
		},

		"merchant": {
			"name": "merchant woman",
			"description": "An old woman with a large backpack.\nShe appears to be a merchant.",
			"portable": false,
			"person": true
		}
	},
	"events": {
		"start_event": {
			"name": "Awake",
			"description": "It begins as soon as you wake up, with a searing pain piercing your temples and spreading across your entire head.\nThen comes the sickness, the dry mouth and the sudden panic - all accompanied alongside that phrase, \"never again\".\n\nAs soon as you open your eyes you realize: This is no hangover. Something terrible must have happened.\nYou are not in your bedroom, but in a dark, moist and cold room lying on a hard wooden bunk.\nYou have lost your memories of yesterday, the last thing you remember is... you are not sure WHAT you remember.",
			"action_move_to_location": "dungeon_cell"
		},

		"empty_bucket": {
			"description": "You empty the bucket in your cell.\nNot very wise from you!\nThe floor is now covered with what was in the bucket before.",
			"prereq_verb": "empty",
			"prereq_used_items":["bucket|full"],
			"action_set_state_items":["bucket|empty"]
		},

		"empty_barrel": {
			"description": "The barrel is to heavy for that!",
			"prereq_verb": "empty",
			"prereq_used_items":["barrel"]
		},
		"trapdoor": {
			"name": "Open trapdoor",
			"description": "You open the trap door with its large metal ring. The opening reveals a small corridor below your cell.",
			"trigger_once": true,
			"prereq_verb": "open",
			"prereq_location": "dungeon_cell",
			"prereq_used_items": ["trap_door"],
			"action_set_state_locations": ["dungeon_cell|trapdoor_open"],
			"action_points": 5
		},

		"get_torch": {
			"description": "The torch makes it easier to find your way. The dungeon down here is mostly dark.\nBut you will be seen immediately with the bright torch in your hands.",
			"prereq_verb": "take",
			"prereq_used_items": ["torch"],
			"prereq_not_inventory_items": ["torch"],
			"action_add_items": ["forward_corridor:stone"],
			"action_continue": true
		},

		"drop_torch": {
			"description": "It is darker around you.",
			"prereq_verb": "drop",
			"prereq_used_items": ["torch"],
			"prereq_inventory_items": ["torch"],
			"action_remove_items": ["torch","forward_corridor:stone"],
			"action_continue": true
		},

		"guard_trigger": {
			"name": "",
			"description": "You see a big guard standing in a corner of the room. He doesn't look into your direction, yet.",
			"prereq_location_items": ["guard|none"],
			"trigger_once": true,
			"prereq_only_after": true
		},

		"hide_barrel": {
			"description": "You duck and hide behind the barrel. The guard seems to have not yet noticed you.",
			"prereq_location": "backward_corridor",
			"prereq_verb": "hide",
			"prereq_preposition": "behind",
			"prereq_used_items": ["barrel"],
			"action_disable_events": ["guard_trigger","throw_stone_at_guard"],
			"action_set_state_locations": ["backward_corridor|hidden"]
		},

		"unhide_barrel": {
			"prereq_verb": "go",
			"prereq_location_state": "backward_corridor|hidden",
			"prereq_only_after": true,
			"action_untrigger_events": ["hide_barrel", "guard_trigger"],
			"action_enable_events": ["guard_trigger","throw_stone_at_guard"],
			"action_set_state_locations": ["backward_corridor|none"]
		},

		"open_barrel": {
			"description": "You open the barrel. It is filled with water.",
			"prereq_verb": "open",
			"prereq_used_items": ["barrel|none"],
			"action_set_state_items": ["barrel|open"]
		},

		"close_barrel": {
			"description": "You close the barrel.",
			"prereq_verb": "close",
			"prereq_used_items": ["barrel|open"],
			"action_set_state_items": ["barrel|none"]
		},

		"clean_ring": {
			"description": "You clean the ring. It looks like it is pure gold!",
			"prereq_verb": "clean",
			"prereq_used_items": ["ring|dirty","barrel|open"],
			"action_set_state_items": ["ring|none"]
		},

		"drink_barrel": {
			"description": "You drink some water from the barrel. Refreshing!",
			"prereq_verb": "drink",
			"prereq_used_items": ["barrel|open"]
		},

		"throw_stone_at_guard_hidden": {
			"description": "You throw the stone at the guard. You hit him on his head and he sinks to the ground.",
			"prereq_location": "backward_corridor",
			"prereq_verb": "throw",
			"prereq_used_items": ["stone","guard"],
			"prereq_inventory_items": ["stone"],
			"prereq_triggered_events":["hide_barrel"],
			"action_disable_events":["arest", "arest_torch"],
			"action_untrigger_events":["hide_barrel"],
			"action_remove_items": ["stone"],
			"action_add_items": ["backward_corridor:stone"],
			"action_set_state_items": ["guard|unconscious"],
			"action_points": 10

		},

		"throw_stone_at_guard": {
			"description": "You try to throw the stone. But the guard is quicker.",
			"prereq_location": "backward_corridor",
			"prereq_verb": "throw",
			"prereq_used_items": ["stone","guard|none"],
			"prereq_inventory_items": ["stone"],
			"action_trigger_event": "arest",
			"action_remove_items": ["stone"],
			"action_add_items": ["backward_corridor:stone"]
		},

		"search_guard": {
			"description": "The guard has a key chained on his belt.",
			"prereq_verb": "search",
			"prereq_used_items": ["guard|unconscious"],
			"trigger_once": true,
			"action_add_items":["location:key"],
			"action_points": 5
		},

		"arest": {
			"name": "The guard arests you!",
			"description": "The guard points his sword into your direction. \"You! Don't move!\" he barks.\n\nYou stand still. He grabs your arm with his free hand and turns you around in a swift movement.\nAfterwards he hits you with his sword handle on the back of your head.\n\nAgain, it gets dark around you when you loose consciousness...",
			"prereq_location": "backward_corridor",
			"prereq_triggered_events": ["guard_trigger"],
			"prereq_triggered_event_step_offset": 3,
			"prereq_location_items": ["guard|none"],
			"action_move_to_location": "dungeon_cell",
			"action_untrigger_events":["guard_trigger"]
		},

		"arest_torch": {
			"name": "",
			"description": "The guard looks at your burning torch, baffled.",
			"prereq_location": "backward_corridor",
			"prereq_inventory_items": ["torch|burning"],
			"action_trigger_event": "arest"
		},

		"two_guards_trigger_eavedrop": {
			"name": "",
			"description": "After a quick glance around the ledge you hear two guards talking to each other.\nYou can eavedrop some of their talk:\n- \"..But where did you loose it?\"\n- \"I don't know, I still had the f*'$! ring this morning!\n  Must have lost it somewhere..\"",
			"prereq_location": "guard_room",
			"trigger_once": true,
			"prereq_only_after": true,
			"action_trigger_event": "two_guards_trigger"
		},

		"two_guards_trigger": {
			"prereq_location": "guard_room",
			"trigger_once": true,
			"prereq_only_after": true
		},

		"two_guards_untrigger": {
			"prereq_location": "upper_corridor",
			"action_untrigger_events":["two_guards_trigger"],
			"action_continue": true
		},

		"two_guards_arest": {
			"name": "",
			"description": "Both guards turn around simultanously and attack you.\nIt all happens very quickly, you have no chance against them.\nAfter getting hit on your head, you loose conscioiusness (again)...",
			"prereq_location": "guard_room",
			"prereq_only_before": true,
			"prereq_triggered_events": ["two_guards_trigger"],
			"prereq_triggered_event_step_offset": 3,
			"action_untrigger_events":["two_guards_trigger"],
			"action_move_to_location": "dungeon_cell"
		},

		"staircase_torch": {
			"description": "The light of the torch reveals a small passage to the east.",
			"prereq_location": "staircase",
			"prereq_inventory_items": ["torch|burning"],
			"prereq_location_state": "staircase|none",
			"action_set_state_locations": ["staircase|torch"]		
		}, 

		"staircase_no_torch": {
			"prereq_location": "staircase",
			"prereq_not_inventory_items": ["torch"],
			"prereq_location_state": "staircase|torch",
			"action_set_state_locations": ["staircase|none"]		
		},

		"search_latrine": {
			"description": "Searching through fecies is no fun.\nHowever, your fingers feel something small and solid.\nIt is a ring!",
			"prereq_verb": "search",
			"prereq_location": "latrine",
			"prereq_used_items": ["latrine"],
			"action_add_items": ["ring|dirty"],
			"action_points": 10
			
		},

		"arest_go_west": {
			"name": "",
			"prereq_verb": "go",
			"prereq_location": "backward_corridor",
			"description": "You try to sneak away...",
			"prereq_location_items": ["guard|none"],
			"prereq_only_before": true,
			"action_trigger_event": "arest"
		},

		"open_unlocked_cell_door": {
			"description": "You open the massive cell door.",
			"prereq_verb": "open",
			"prereq_used_items": ["unlocked_cell_door"],
			"action_set_state_items": ["unlocked_cell_door|open"],
			"action_set_state_locations": ["lower_cell|celldoor_open"],
			"action_points": 5
		},

		"open_portal": {
			"description": "You open the left door leaf with the key from the guard.",
			"prereq_location_items": ["portal|none"],
			"prereq_verb": "open",
			"prereq_used_items": ["portal|none"],
			"prereq_inventory_items": ["key"],
			"action_set_state_items": ["portal|open"],
			"action_new_connections": ["entrance_corridor:south:outside"],
			"trigger_once": true,
			"action_trigger_event": "merchant",
			"action_points": 5
		},

		"merchant": {
			"prereq_location": "none",
			"description": "Directly after opening the portal an old woman comes through the opening.\nShe does not wear the clothes of a guard but a large backpack, she appears to be a traveling merchant.\nShe says:\n- \"Who are you? You look like a prisoner.\n  do you know a reason why I should not alarm the guards right away?\"",
			"action_add_items":["location:merchant"]
		},

		"merchant_ring": {
			"description": "You give her the ring you found.\nShe says:\n- \"Hmm. Ok boy, I keep my mouth shut. Now leave befor I change my mind!\"\nShe quickly disappears into the building.",
			"prereq_location_items": ["merchant"],
			"prereq_verb": "give",
			"prereq_used_items": ["ring|none"],
			"action_remove_items": ["entrance_corridor:merchant"]
		},

		"merchant_ring_dirty": {
			"description": "You give her the dirty ring you found.\nShe says:\n- \"Oh boy, what will I do with this dirty, useless crap?\"",
			"prereq_location_items": ["merchant"],
			"prereq_verb": "give",
			"prereq_used_items": ["ring|dirty"]
		},

		"merchant_alarm": {
			"prereq_location_items": ["merchant"],
			"prereq_verb": "go",
			"description": "The old woman blocks your way with her large backpack.\nShe screams for help and before you manage to overwhealm her, two guards are running towards you.\nThey hit you on your head.\nThe last thing you think about before it gets dark around you is \"not again!\"",
			"action_move_to_location": "dungeon_cell"
		},

		"win_event": {
			"description": "You managed to find out of the dungeon!",
			"prereq_location": "outside",
			"action_points": 10

		},
		"demo": {
			"name": "Demo event to demonstrate the event system.",
			"comment": "This comment is for describing this object, it is not displayed in the game.",
			"description": "This is the demo event! Just for testing purposes...",
			"prereq_verb": "switch",
			"prereq_location": "",
			"prereq_used_items": [],
			"prereq_location_items": [],
			"prereq_inventory_items": [],
			"prereq_preposition": "on",
			"prereq_min_steps": 0,
			"prereq_max_steps": 0,
			"prereq_triggered_event_step_offset": 0,
			"prereq_triggered_events": [],
			"prereq_visited_locations": [],
			"prereq_only_before": false,
			"prereq_only_after": false,
			"prereq_location_state": "",
			"action_add_items": [""],
			"action_remove_items": [""],
			"action_set_state_locations": [],
			"action_move_to_location": "",
			"action_new_connections": "",
			"action_disable_events": [],
			"action_untrigger_events": [],
			"action_trigger_event": "",
			"action_enable_events": []
		}
	}
}